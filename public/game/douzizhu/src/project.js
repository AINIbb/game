window.__require=function e(t,a,o){function n(s,r){if(!a[s]){if(!t[s]){var c=s.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!r&&l)return l(c,!0);if(i)return i(c,!0);throw new Error("Cannot find module '"+s+"'")}}var d=a[s]={exports:{}};t[s][0].call(d.exports,function(e){return n(t[s][1][e]||e)},d,d.exports,e,t,a,o)}return a[s].exports}for(var i="function"==typeof __require&&__require,s=0;s<o.length;s++)n(o[s]);return n}({card:[function(e,t,a){"use strict";cc._RF.push(t,"2afe8rz92BOl7CbQfKSCoLh","card");var o=function(e){return e&&e.__esModule?e:{default:e}}(e("../../mygolbal.js"));cc.Class({extends:cc.Component,properties:{cards_sprite_atlas:cc.SpriteAtlas},onLoad:function(){this.flag=!1,this.offset_y=20,this.node.on("reset_card_flag",function(e){1==flag&&(flag=!1,this.node.y-=this.offset_y)}.bind(this))},runToCenter:function(){},start:function(){},init_data:function(e){},setTouchEvent:function(){this.accountid==o.default.playerData.accountID&&this.node.on(cc.Node.EventType.TOUCH_START,function(e){var t=this.node.parent;if(t.getComponent("gameScene").roomstate==RoomState.ROOM_PLAYING)if(console.log("TOUCH_START id:"+this.card_id),0==this.flag){this.flag=!0,this.node.y+=this.offset_y;var a={cardid:this.card_id,card_data:this.card_data};t.emit("choose_card_event",a)}else this.flag=!1,this.node.y-=this.offset_y,t.emit("unchoose_card_event",this.card_id)}.bind(this))},showCards:function(e,t){this.card_id=e.index,this.card_data=e,t&&(this.accountid=t);var a="";a=e.shape?"card_"+(13*{1:3,2:2,3:1,4:0}[e.shape]+{12:1,13:2,1:3,2:4,3:5,4:6,5:7,6:8,7:9,8:10,9:11,10:12,11:13}[e.value]):"card_"+{14:54,15:53}[e.king],this.node.getComponent(cc.Sprite).spriteFrame=this.cards_sprite_atlas.getSpriteFrame(a),this.setTouchEvent()}}),cc._RF.pop()},{"../../mygolbal.js":"mygolbal"}],creatRoom:[function(e,t,a){"use strict";cc._RF.push(t,"e85c8xPVuxKX5zdxLJ1e12h","creatRoom");var o=function(e){return e&&e.__esModule?e:{default:e}}(e("../../mygolbal.js"));cc.Class({extends:cc.Component,properties:{},onLoad:function(){console.log(o.default.requestHttp)},start:function(){},_createroom:function(e){if(e<0||e>4)console.log("create room rate error"+e);else{var t=0;1==e?t=10:2==e?t=20:3==e?t=30:4==e&&(t=40);var a={global:t,rate:e};o.default.socket.request_creatroom(a,function(e,t){0!=e?console.log("create_room err:"+e):(console.log("create_room"+JSON.stringify(t)),o.default.playerData.bottom=t.bottom,o.default.playerData.rate=t.rate,cc.director.loadScene("gameScene"))})}},onButtonClick:function(e,t){switch(t){case"create_room_1":this._createroom(1);break;case"create_room_2":this._createroom(2);break;case"create_room_3":this._createroom(3);break;case"create_room_4":this._createroom(4);break;case"create_room_close":this.node.destroy()}this.node.destroy()}}),cc._RF.pop()},{"../../mygolbal.js":"mygolbal"}],event_lister:[function(e,t,a){"use strict";cc._RF.push(t,"d485eyCsiBLBqweDM7SjVQh","event_lister"),Object.defineProperty(a,"__esModule",{value:!0});a.default=function(e){var t={};return e.on=function(e,a){t.hasOwnProperty(e)?t[e].push(a):t[e]=[a]},e.fire=function(e){if(t.hasOwnProperty(e))for(var a=t[e],o=0;o<a.length;++o){var n=a[o],i=[];for(o=1;o<arguments.length;++o)i.push(arguments[o]);console.log("handle.call(this,args) type:"+e),n.apply(this,i)}},e.removeLister=function(e){t[e]=[]},e.removeAllLister=function(){t={}},e},t.exports=a.default,cc._RF.pop()},{}],gameScene:[function(e,t,a){"use strict";cc._RF.push(t,"cf22aez0/xDaaC1kRqxn/pw","gameScene");var o=function(e){return e&&e.__esModule?e:{default:e}}(e("../mygolbal.js"));cc.Class({extends:cc.Component,properties:{di_label:cc.Label,beishu_label:cc.Label,roomid_label:cc.Label,player_node_prefabs:cc.Prefab,players_seat_pos:cc.Node,loading:cc.Prefab},gameEnd:function(){},onLoad:function(){this.playerNodeList=[],this.di_label.string="\u5e95:"+o.default.playerData.bottom,this.beishu_label.string="\u500d\u6570:"+o.default.playerData.rate,this.roomstate=RoomState.ROOM_INVALID,this.loading=!1,this.node.on("pushcard_other_event",function(){console.log("gamescene pushcard_other_event");for(var e=0;e<this.playerNodeList.length;e++){var t=this.playerNodeList[e];t&&t.emit("push_card_event")}}.bind(this)),o.default.socket.onRoomChangeState(function(e){console.log("onRoomChangeState:"+e),this.roomstate=e}.bind(this)),this.node.on("canrob_event",function(e){console.log("gamescene canrob_event:"+e);for(var t=0;t<this.playerNodeList.length;t++){var a=this.playerNodeList[t];a&&a.emit("playernode_canrob_event",e)}}.bind(this)),this.node.on("choose_card_event",function(e){console.log("--------choose_card_event-----------");var t=this.node.getChildByName("gameingUI");null!=t?t.emit("choose_card_event",e):console.log("get childer name gameingUI")}.bind(this)),this.node.on("unchoose_card_event",function(e){console.log("--------unchoose_card_event-----------");var t=this.node.getChildByName("gameingUI");null!=t?t.emit("unchoose_card_event",e):console.log("get childer name gameingUI")}.bind(this)),o.default.socket.request_enter_room({},function(e,t){if(console.log("enter_room_resp"+JSON.stringify(t)),0!=e)console.log("enter_room_resp err:"+e);else{var a=t.seatindex;this.playerdata_list_pos=[],this.setPlayerSeatPos(a);var n=t.playerdata,i=t.roomid;this.roomid_label.string="\u623f\u95f4\u53f7:"+i,o.default.playerData.housemanageid=t.housemanageid;for(var s=0;s<n.length;s++)this.addPlayerNode(n[s]);isopen_sound&&(cc.audioEngine.stopAll(),cc.audioEngine.play(cc.url.raw("resources/sound/bg.mp3"),!0))}this.node.getChildByName("gamebeforeUI").emit("init")}.bind(this)),o.default.socket.onPlayerJoinRoom(function(e){console.log("onPlayerJoinRoom:"+JSON.stringify(e)),this.addPlayerNode(e)}.bind(this)),o.default.socket.onPlayerReady(function(e){console.log("-------onPlayerReady:"+e);for(var t=0;t<this.playerNodeList.length;t++){var a=this.playerNodeList[t];a&&a.emit("player_ready_notify",e)}}.bind(this)),o.default.socket.onGameStart(function(){for(var e=0;e<this.playerNodeList.length;e++){var t=this.playerNodeList[e];t&&t.emit("gamestart_event")}var a=this.node.getChildByName("gamebeforeUI");a&&(a.active=!1)}.bind(this)),o.default.socket.onRobState(function(e){console.log("-----onRobState"+JSON.stringify(e));for(var t=0;t<this.playerNodeList.length;t++){var a=this.playerNodeList[t];a&&a.emit("playernode_rob_state_event",e)}}.bind(this)),o.default.socket.onChangeMaster(function(e){console.log("onChangeMaster"+e),o.default.playerData.master_accountid=e;for(var t=0;t<this.playerNodeList.length;t++){var a=this.playerNodeList[t];a&&a.emit("playernode_changemaster_event",e)}}.bind(this)),o.default.socket.onShowBottomCard(function(e){console.log("onShowBottomCard---------"+e);var t=this.node.getChildByName("gameingUI");null!=t?t.emit("show_bottom_card_event",e):console.log("get childer name gameingUI")}.bind(this))},setPlayerSeatPos:function(e){if(e<1||e>3)console.log("seat_index error"+e);else switch(console.log("setPlayerSeatPos seat_index:"+e),e){case 1:this.playerdata_list_pos[1]=0,this.playerdata_list_pos[2]=1,this.playerdata_list_pos[3]=2;break;case 2:this.playerdata_list_pos[2]=0,this.playerdata_list_pos[3]=1,this.playerdata_list_pos[1]=2;break;case 3:this.playerdata_list_pos[3]=0,this.playerdata_list_pos[1]=1,this.playerdata_list_pos[2]=2}},addPlayerNode:function(e){console.log("player_data",e);var t=cc.instantiate(this.player_node_prefabs);t.parent=this.node,this.playerNodeList.push(t),console.log("playerdata_list_pos",this.playerdata_list_pos);var a=this.playerdata_list_pos[e.seatindex];console.log("index "+e.seatindex+" "+a),t.position=this.players_seat_pos.children[a].position,t.getComponent("player_node").init_data(e,a)},start:function(){},getUserOutCardPosByAccount:function(e){console.log("getUserOutCardPosByAccount accountid:"+e);for(var t=0;t<this.playerNodeList.length;t++){var a=this.playerNodeList[t];if(a){var o=a.getComponent("player_node");if(o.accountid===e){var n=this.players_seat_pos.children[o.seat_index],i="cardsoutzone"+o.seat_index;return n.getChildByName(i)}}}return null}}),cc._RF.pop()},{"../mygolbal.js":"mygolbal"}],gamebeforeUI:[function(e,t,a){"use strict";cc._RF.push(t,"34b69bK3SJBFbE0zzOU1X9M","gamebeforeUI");var o=function(e){return e&&e.__esModule?e:{default:e}}(e("../mygolbal.js"));cc.Class({extends:cc.Component,properties:{btn_ready:cc.Node,btn_gamestart:cc.Node},onLoad:function(){this.btn_gamestart.active=!1,this.btn_ready.active=!1,this.node.on("init",function(){console.log("game beforeui init"),console.log("myglobal.playerData.housemanageid"+o.default.playerData.housemanageid),console.log("myglobal.playerData.accountID"+o.default.playerData.accountID),o.default.playerData.housemanageid==o.default.playerData.accountID?(this.btn_gamestart.active=!0,this.btn_ready.active=!1):(this.btn_gamestart.active=!1,this.btn_ready.active=!0)}.bind(this)),o.default.socket.onChangeHouseManage(function(e){console.log("gamebrforeUI onChangeHouseManage revice"+JSON.stringify(e)),o.default.playerData.housemanageid=e,o.default.playerData.housemanageid==o.default.playerData.accountID?(this.btn_gamestart.active=!0,this.btn_ready.active=!1):(this.btn_gamestart.active=!1,this.btn_ready.active=!0)}.bind(this))},start:function(){},onButtonClick:function(e,t){switch(t){case"btn_ready":console.log("btn_ready"),o.default.socket.requestReady();break;case"btn_start":console.log("btn_start"),o.default.socket.requestStart(function(e,t){0!=e?console.log("requestStart err"+e):console.log("requestStart data"+JSON.stringify(t))})}}}),cc._RF.pop()},{"../mygolbal.js":"mygolbal"}],gameingUI:[function(e,t,a){"use strict";cc._RF.push(t,"fc5fbLb+LFG+rCIt1gYkSVX","gameingUI");var o=function(e){return e&&e.__esModule?e:{default:e}}(e("../mygolbal.js"));cc.Class({extends:cc.Component,properties:{gameingUI:cc.Node,card_prefab:cc.Prefab,robUI:cc.Node,bottom_card_pos_node:cc.Node,playingUI_node:cc.Node,tipsLabel:cc.Label,clockLabel:cc.Label,robUILabel:cc.Label,gameOverPop:cc.Node,gameBeforePop:cc.Node},onLoad:function(){this.cards_nods=[],this.card_width=0,this.rob_player_accountid=0,this.fapai_end=!1,this.bottom_card=[],this.bottom_card_data=[],this.choose_card_data=[],this.outcar_zone=[],this.dizhuTime=null,this.chupaiTime=null,this.push_card_tmp=[],o.default.socket.onPushCards(function(e){console.log("onPushCards"+JSON.stringify(e)),this.card_data=e,this.cur_index_card=e.length-1,this.pushCard(e),isopen_sound&&console.log("start fapai_audioID"+this.fapai_audioID),this.scheduleOnce(this._runactive_pushcard.bind(this),.3),this.node.parent.emit("pushcard_other_event")}.bind(this)),o.default.socket.onCanRobState(function(e){console.log("onCanRobState"+JSON.stringify(e)),this.rob_player_accountid=e,e==o.default.playerData.accountID&&1==this.fapai_end&&this.rootTime()}.bind(this)),o.default.socket.onCanChuCard(function(e){console.log("onCanRobState"+JSON.stringify(e)),e==o.default.playerData.accountID&&(this.clearOutZone(o.default.playerData.accountID),this.playingUI_node.active=!0)}.bind(this)),o.default.socket.onGameOver(function(e){console.log("\u6e38\u620f\u662f\u5426\u7ed3\u675f"+JSON.stringify(e)),0==e&&(this.tipsLabel.string="\u6e38\u620f\u7ed3\u675f!",setTimeout(function(){this.tipsLabel.string=""}.bind(this),2e3),console.log("\u6e38\u620f\u7ed3\u675f"+JSON.stringify(e)))}.bind(this)),o.default.socket.onOtherPlayerChuCard(function(e){console.log("onOtherPlayerChuCard"+JSON.stringify(e));var t=e.accountid,a=this.node.parent.getComponent("gameScene").getUserOutCardPosByAccount(t);if(null!=a){for(var n=[],i=0;i<e.cards.length;i++){var s=cc.instantiate(this.card_prefab);s.getComponent("card").showCards(e.cards[i].card_data,o.default.playerData.accountID),n.push(s)}this.appendOtherCardsToOutZone(a,n,0)}}.bind(this)),this.node.on("show_bottom_card_event",function(e){console.log("----show_bottom_card_event",+e),this.bottom_card_data=e;for(var t=0;t<e.length;t++){var a=this.bottom_card[t],n=e[t],i={obj:a,data:n};console.log("bottom show_data:"+JSON.stringify(n));var s=cc.callFunc(function(e,t){var a=t.obj,o=t.data;a.getComponent("card").showCards(o)},this,i);a.runAction(cc.sequence(cc.rotateBy(0,0,180),cc.rotateBy(.2,0,-90),s,cc.rotateBy(.2,0,-90),cc.scaleBy(1,1.2))),isopen_sound&&cc.audioEngine.play(cc.url.raw("resources/sound/start.mp3"))}o.default.playerData.accountID==o.default.playerData.master_accountid&&this.scheduleOnce(this.pushThreeCard.bind(this),.2)}.bind(this)),this.node.on("choose_card_event",function(e){console.log("choose_card_event:"+JSON.stringify(e));var t=e;this.choose_card_data.push(t)}.bind(this)),this.node.on("unchoose_card_event",function(e){console.log("unchoose_card_event:"+e);for(var t=e,a=0;a<this.choose_card_data.length;a++)this.choose_card_data[a].cardid==t&&this.choose_card_data.splice(a,1)}.bind(this))},start:function(){},playingClockTime:function(){var e=this;this.playingUI_node.active=!0;var t=35;this.chupaiTime=setInterval(function(){t-=1,e.clockLabel.string=t.toString(),0==t&&(e.clockLabel.string="34",o.default.socket.request_buchu_card([],null),e.playingUI_node.active=!1,clearInterval(e.chupaiTime))},1e3)},rootTime:function(){var e=this;this.robUI.active=!0;var t=10;this.dizhuTime=setInterval(function(){t-=1,e.robUILabel.string=t.toString(),0==t&&(o.default.socket.requestRobState(qian_state.buqiang),e.robUI.active=!1,isopen_sound&&cc.audioEngine.play(cc.url.raw("resources/sound/woman_bu_jiao.ogg")),clearInterval(e.dizhuTime))},1e3)},_runactive_pushcard:function(){if(this.cur_index_card<0){console.log("pushcard end"),this.fapai_end=!0,this.rob_player_accountid==o.default.playerData.accountID&&this.rootTime(),isopen_sound&&cc.audioEngine.stop(this.fapai_audioID);var e=this.rob_player_accountid;this.node.parent.emit("canrob_event",e)}else{(a=this.cards_nods[this.cards_nods.length-this.cur_index_card-1]).active=!0,this.push_card_tmp.push(a),this.fapai_audioID=cc.audioEngine.play(cc.url.raw("resources/sound/fapai1.mp3"));for(var t=0;t<this.push_card_tmp.length-1;t++){var a,n=(a=this.push_card_tmp[t]).x-.4*this.card_width,i=cc.moveTo(.1,cc.v2(n,-250));a.runAction(i)}this.cur_index_card--,this.scheduleOnce(this._runactive_pushcard.bind(this),.3)}},sortCard:function(){this.cards_nods.sort(function(e,t){var a=e.getComponent("card").card_data,o=t.getComponent("card").card_data;return a.hasOwnProperty("value")&&o.hasOwnProperty("value")?o.value-a.value:a.hasOwnProperty("king")&&!o.hasOwnProperty("king")?-1:!a.hasOwnProperty("king")&&o.hasOwnProperty("king")?1:a.hasOwnProperty("king")&&o.hasOwnProperty("king")?o.king-a.king:void 0});setTimeout(function(){var e=this.cards_nods[0].x;console.log("sort x:"+e);for(var t=0;t<this.cards_nods.length;t++){var a=this.cards_nods[t];a.zIndex=t,a.x=e+.4*a.width*t}}.bind(this),1e3)},pushCard:function(e){e&&e.sort(function(e,t){return e.hasOwnProperty("value")&&t.hasOwnProperty("value")?t.value-e.value:e.hasOwnProperty("king")&&!t.hasOwnProperty("king")?-1:!e.hasOwnProperty("king")&&t.hasOwnProperty("king")?1:e.hasOwnProperty("king")&&t.hasOwnProperty("king")?t.king-e.king:void 0}),this.cards_nods=[];for(var t=0;t<17;t++){var a=cc.instantiate(this.card_prefab);a.scale=.8,a.parent=this.node.parent,a.x=.4*a.width*-.5*-16+.4*a.width*0,a.y=-250,a.active=!1,a.getComponent("card").showCards(e[t],o.default.playerData.accountID),this.cards_nods.push(a),this.card_width=a.width}this.bottom_card=[];for(t=0;t<3;t++){var n=cc.instantiate(this.card_prefab);n.scale=.4,n.position=this.bottom_card_pos_node.position,0==t?n.x=n.x-.4*n.width:2==t&&(n.x=n.x+.4*n.width),n.parent=this.node.parent,this.bottom_card.push(n)}},schedulePushThreeCard:function(){for(var e=0;e<this.cards_nods.length;e++){var t=this.cards_nods[e];-230==t.y&&(t.y=-250)}},pushThreeCard:function(){for(var e=this.cards_nods[this.cards_nods.length-1].x,t=0;t<this.bottom_card_data.length;t++){var a=cc.instantiate(this.card_prefab);a.scale=.8,a.parent=this.node.parent,a.x=e+(t+1)*this.card_width*.4,a.y=-230,a.getComponent("card").showCards(this.bottom_card_data[t],o.default.playerData.accountID),a.active=!0,this.cards_nods.push(a)}this.sortCard(),this.scheduleOnce(this.schedulePushThreeCard.bind(this),2)},destoryCard:function(e,t){if(0!=t.length){for(var a=[],o=0;o<t.length;o++)for(var n=0;n<this.cards_nods.length;n++){var i=this.cards_nods[n].getComponent("card").card_id;i==t[o].cardid&&(console.log("destroy card id:"+i),this.cards_nods[n].removeFromParent(!0),a.push(this.cards_nods[n]),this.cards_nods.splice(n,1))}this.appendCardsToOutZone(e,a),this.updateCards()}},clearOutZone:function(e){for(var t=this.node.parent.getComponent("gameScene").getUserOutCardPosByAccount(e),a=t.children,o=0;o<a.length;o++){a[o].destroy()}t.removeAllChildren(!0)},pushCardSort:function(e){1!=e.length&&e.sort(function(e,t){var a=e.getComponent("card").card_data,o=t.getComponent("card").card_data;return a.hasOwnProperty("value")&&o.hasOwnProperty("value")?o.value-a.value:a.hasOwnProperty("king")&&!o.hasOwnProperty("king")?-1:!a.hasOwnProperty("king")&&o.hasOwnProperty("king")?1:a.hasOwnProperty("king")&&o.hasOwnProperty("king")?o.king-a.king:void 0})},appendOtherCardsToOutZone:function(e,t,a){e.removeAllChildren(!0);for(var o=0;o<t.length;o++){var n=t[o];e.addChild(n,100+o)}var i=t.length/2;for(o=0;o<t.length;o++){var s=e.getChildren()[o],r=30*(o-i),c=s.y+a;s.setScale(.5,.5),s.setPosition(r,c)}},appendCardsToOutZone:function(e,t){if(0!=t.length){this.pushCardSort(t);var a=this.node.parent.getComponent("gameScene").getUserOutCardPosByAccount(e);this.appendOtherCardsToOutZone(a,t,360)}},updateCards:function(){for(var e=this.cards_nods.length/2,t=0;t<this.cards_nods.length;t++){var a=this.cards_nods[t],o=(t-e)*(.4*this.card_width);a.setPosition(o,-250)}},playPushCardSound:function(e){if(console.log("playPushCardSound:"+e),""!=e)switch(e){case CardsValue.one.name:break;case CardsValue.double.name:isopen_sound&&cc.audioEngine.play(cc.url.raw("resources/sound/duizi.mp3"))}},onButtonClick:function(e,t){switch(t){case"btn_qiandz":console.log("btn_qiandz"),o.default.socket.requestRobState(qian_state.qian),this.robUI.active=!1,isopen_sound&&cc.audioEngine.play(cc.url.raw("resources/sound/woman_jiao_di_zhu.ogg")),clearInterval(this.dizhuTime),clearInterval(this.chupaiTime);break;case"btn_buqiandz":console.log("btn_buqiandz"),o.default.socket.requestRobState(qian_state.buqiang),this.robUI.active=!1,isopen_sound&&cc.audioEngine.play(cc.url.raw("resources/sound/woman_bu_jiao.ogg")),clearInterval(this.dizhuTime),clearInterval(this.chupaiTime);break;case"nopushcard":o.default.socket.request_buchu_card([],null),this.playingUI_node.active=!1,clearInterval(this.dizhuTime),clearInterval(this.chupaiTime);break;case"pushcard":if(0==this.choose_card_data.length){this.tipsLabel.string="\u8bf7\u9009\u62e9\u724c!",setTimeout(function(){this.tipsLabel.string=""}.bind(this),2e3);break}o.default.socket.request_chu_card(this.choose_card_data,function(e,t){if(e){console.log("request_chu_card:"+e),console.log("request_chu_card"+JSON.stringify(t)),""==this.tipsLabel.string&&(this.tipsLabel.string=t.msg,setTimeout(function(){this.tipsLabel.string=""}.bind(this),2e3));for(var a=0;a<this.cards_nods.length;a++){this.cards_nods[a].emit("reset_card_flag")}this.choose_card_data=[]}else console.log("resp_chu_card data:"+JSON.stringify(t)),this.playingUI_node.active=!1,this.playPushCardSound(t.cardvalue.name),this.destoryCard(t.account,this.choose_card_data),this.choose_card_data=[];clearInterval(this.dizhuTime),clearInterval(this.chupaiTime)}.bind(this))}}}),cc._RF.pop()},{"../mygolbal.js":"mygolbal"}],hallScene:[function(e,t,a){"use strict";cc._RF.push(t,"9eee7bdCqVB/LXv3XqKAza9","hallScene");var o=function(e){return e&&e.__esModule?e:{default:e}}(e("../mygolbal.js"));cc.Class({extends:cc.Component,properties:{nickname_label:cc.Label,headimage:cc.Sprite,gobal_count:cc.Label,creatroom_prefabs:cc.Prefab,joinroom_prefabs:cc.Prefab,flower:cc.Prefab},onLoad:function(){var e=this;this.gobal_count.string=":"+o.default.playerData.gobal_count,o.default.socket.initSocket(),o.default.socket.onConnect(function(t){console.log("userinfo"+JSON.stringify(t)),o.default.playerData.nickName=t.nick_name,o.default.playerData.accountID=t.accountid,e.nickname_label=o.default.playerData.nickName})},start:function(){},onButtonClick:function(e,t){switch(t){case"create_room":var a=cc.instantiate(this.creatroom_prefabs);a.parent=this.node,a.zIndex=100;break;case"join_room":var o=cc.instantiate(this.joinroom_prefabs);o.parent=this.node,o.zIndex=100}}}),cc._RF.pop()},{"../mygolbal.js":"mygolbal"}],http:[function(e,t,a){"use strict";cc._RF.push(t,"bdea1JtENxB/JANa2VcEr2W","http"),Object.defineProperty(a,"__esModule",{value:!0});var o=function(){var e={url:"http://192.168.1.3:8889/api/snakeGame/",publickey:"-----BEGIN RSA PUBLIC KEY-----MIIBJjANBgkqhkiG9w0BAQEFAAOCARMAMIIBDgKCAQUL3U21c/FnY7GzbbD1Mywu8XM6yBd0N1v+hjr4oWQspxPe+hReKtq+15DZ8msN2OeIE25T1AiFx/ZjgjwOmll7EuqZmb5zRJVmRW0h0jOJL6eJ+Hf4Q2n6I7yJ9EIFHVI8PJGhVoAUfldDNa/H4JfmJjzPDVhBEUbHO7oteaUNGOFBmjQuU7Vx/2THn0jBJ8+OSTIq3dws7Ad3ZgrYF8NQ3Clz3bCY6RpO+sKFNENjoECjoeNnUrjGM3+px1FVQaYh9jk44TqjKm950lEf4Z6XLInrJOd8E3xGOrKUvaIQwts14rFdofn1GjvQgZ4a1JYtT+Y7pFaCUQF7lCOB91v1zeMe5TkCAwEAAQ==-----END RSA PUBLIC KEY-----",http:function(t,a,o,n){var i=new XMLHttpRequest;console.log(e.url+t),i.onreadystatechange=function(){if(4==i.readyState){var e=i.status;if(e>=200&&e<300){if(n){var t=JSON.parse(i.responseText);n(t)}}else console.log("\u8bf7\u6c42\u5931\u8d25",e)}},i.timeout=18e4,i.ontimeout=function(){n("error")},i.onerror=function(){n("error")},i.open(o,e.url+t,!0);var s="token"+localStorage.getItem("walletAddress");i.setRequestHeader("x-token",localStorage.getItem(s)),i.setRequestHeader("Content-Type","application/json"),a=JSON.stringify(a),i.send(a)}};return e}();a.default=o,t.exports=a.default,cc._RF.pop()},{}],joinRoom:[function(e,t,a){"use strict";cc._RF.push(t,"9b543i+qr1Px4nfSdBwSJcb","joinRoom");var o=function(e){return e&&e.__esModule?e:{default:e}}(e("../../mygolbal.js"));cc.Class({extends:cc.Component,properties:{joinids:{type:cc.Label,default:[]},tipsLabel:cc.Label,loading:cc.Prefab},onLoad:function(){this.joinid="",this.cur_input_count=-1},start:function(){},onButtonClick:function(e,t){if(1===t.length){if(this.joinid+=t,this.cur_input_count+=1,this.joinids[this.cur_input_count].string=t,this.joinid.length>=6){var a={roomid:parseInt(this.joinid)};return void o.default.socket.request_jion(a,function(e,t){e?console.log("err"+e):(console.log("join room sucess"+JSON.stringify(t)),o.default.playerData.bottom=t.bottom,o.default.playerData.rate=t.rate,cc.director.loadScene("gameScene"))})}console.log("customData:"+t)}switch(t){case"back":if(this.cur_input_count<0)return;this.joinids[this.cur_input_count].string="",this.cur_input_count-=1,this.joinid=this.joinid.substring(0,this.joinid.length-1);break;case"clear":for(var n=0;n<6;++n)this.joinids[n].string="";this.joinid="",this.cur_input_count=-1;break;case"close":this.node.destroy()}}}),cc._RF.pop()},{"../../mygolbal.js":"mygolbal"}],loginScene:[function(e,t,a){"use strict";cc._RF.push(t,"b05a68gSOpBWr8ddvT03Jpj","loginScene");var o=function(e){return e&&e.__esModule?e:{default:e}}(e("../mygolbal.js"));cc.Class({extends:cc.Component,properties:{wait_node:cc.Node},onLoad:function(){isopen_sound&&cc.audioEngine.play(cc.url.raw("resources/sound/login_bg.ogg"),!0),o.default.socket.initSocket()},start:function(){},onButtonCilck:function(e,t){switch(t){case"wx_login":console.log("wx_login request"),o.default.socket.request_wxLogin({uniqueID:o.default.playerData.uniqueID,accountID:o.default.playerData.accountID,nickName:o.default.playerData.nickName,avatarUrl:o.default.playerData.avatarUrl},function(e,t){0==e?(console.log("login sucess"+JSON.stringify(t)),o.default.playerData.gobal_count=t.goldcount,cc.director.loadScene("hallScene")):console.log("err:"+e)}.bind(this))}}}),cc._RF.pop()},{"../mygolbal.js":"mygolbal"}],mygolbal:[function(e,t,a){"use strict";cc._RF.push(t,"d9667atqdBHIb60A67blB9L","mygolbal"),Object.defineProperty(a,"__esModule",{value:!0});var o=r(e("./data/socket_ctr.js")),n=r(e("./data/player.js")),i=r(e("./util/event_lister.js")),s=r(e("./util/http.js"));function r(e){return e&&e.__esModule?e:{default:e}}var c={}||c;console.log(s.default),c.socket=(0,o.default)(),c.playerData=(0,n.default)(),c.eventlister=(0,i.default)({}),c.requestHttp=s.default,a.default=c,t.exports=a.default,cc._RF.pop()},{"./data/player.js":"player","./data/socket_ctr.js":"socket_ctr","./util/event_lister.js":"event_lister","./util/http.js":"http"}],player_node:[function(e,t,a){"use strict";cc._RF.push(t,"aa64aMZgnFIfLx2Lmi+lbwV","player_node");var o=function(e){return e&&e.__esModule?e:{default:e}}(e("../../mygolbal.js"));cc.Class({extends:cc.Component,properties:{account_label:cc.Label,nickname_label:cc.Label,room_touxiang:cc.Sprite,globalcount_label:cc.Label,headimage:cc.Sprite,readyimage:cc.Node,offlineimage:cc.Node,card_node:cc.Node,card_prefab:cc.Prefab,clockimage:cc.Node,qiangdidzhu_node:cc.Node,time_label:cc.Label,robimage_sp:cc.SpriteFrame,robnoimage_sp:cc.SpriteFrame,robIconSp:cc.Sprite,robIcon_Sp:cc.Node,robnoIcon_Sp:cc.Node,masterIcon:cc.Node},onLoad:function(){this.readyimage.active=!1,this.offlineimage.active=!1,this.node.on("gamestart_event",function(e){this.readyimage.active=!1}.bind(this)),this.node.on("push_card_event",function(e){console.log("on push_card_event"),this.accountid!=o.default.playerData.accountID&&this.pushCard()}.bind(this)),this.node.on("playernode_rob_state_event",function(e){var t=e;t.accountid==this.accountid&&(this.qiangdidzhu_node.active=!1),this.accountid==t.accountid&&(t.state==qian_state.qian?(console.log("this.robIcon_Sp.active = true"),this.robIcon_Sp.active=!0):t.state==qian_state.buqiang?this.robnoIcon_Sp.active=!0:console.log("get rob value :"+t.state))}.bind(this)),this.node.on("playernode_changemaster_event",function(e){var t=e;this.robIcon_Sp.active=!1,this.robnoIcon_Sp.active=!1,t==this.accountid&&(this.masterIcon.active=!0)}.bind(this))},start:function(){},init_data:function(e,t){console.log("init_data:"+JSON.stringify(e)),this.accountid=e.accountid,this.account_label.string=e.accountid,this.nickname_label.string=e.nick_name,this.globalcount_label.string=e.goldcount,this.cardlist_node=[],this.seat_index=t,1==e.isready&&(this.readyimage.active=!0);var a="UI/headimage/"+e.avatarUrl;cc.loader.loadRes(a,cc.SpriteFrame,function(e,t){e?console.log(e.message||e):this.headimage.spriteFrame=t}.bind(this)),this.node.on("player_ready_notify",function(e){console.log("player_ready_notify event",e);var t=e;console.log("------player_ready_notify detail:"+t),t==this.accountid&&(this.readyimage.active=!0)}.bind(this)),this.node.on("playernode_canrob_event",function(e){var t=e;console.log("------playernode_canrob_event detail:"+t),t==this.accountid&&(this.qiangdidzhu_node.active=!0,this.time_label.string="10")}.bind(this)),1==t&&(this.card_node.x=-this.card_node.x-30)},pushCard:function(){this.card_node.active=!0;for(var e=0;e<17;e++){var t=cc.instantiate(this.card_prefab);t.scale=.6,console.log(" this.card_node.parent.parent"+this.card_node.parent.parent.name),t.parent=this.card_node;var a=t.height;t.y=8*a*.4*.3-.4*a*.3*e,t.x=0,this.cardlist_node.push(t)}}}),cc._RF.pop()},{"../../mygolbal.js":"mygolbal"}],player:[function(e,t,a){"use strict";cc._RF.push(t,"ec2a0fYPv1ASr8YTOKp3Np/","player"),Object.defineProperty(a,"__esModule",{value:!0});var o=function(e){for(var t="",a=0;a<e;a++)t+=Math.floor(10*Math.random());return t};a.default=function(){var e={};e.uniqueID=1+o(6),e.accountID="2"+o(6),e.nickName="tiny"+o(3);var t="avatar_"+(Math.floor(3*Math.random())+1);return e.avatarUrl=t,e.gobal_count=0,e.master_accountid=0,e},t.exports=a.default,cc._RF.pop()},{}],socket_ctr:[function(e,t,a){"use strict";cc._RF.push(t,"9ce03TvsElJsaLzLDlseCff","socket_ctr"),Object.defineProperty(a,"__esModule",{value:!0});var o=function(e){return e&&e.__esModule?e:{default:e}}(e("../util/event_lister.js"));a.default=function(){var e={},t={},a=0,n=null,i=(0,o.default)({}),s=function(e,t,a){try{console.log("notify",a),n.send(JSON.stringify(["notify",{cmd:e,data:t,callindex:a}]))}catch(e){console.log(e)}},r=function(e,o,n){console.log("send cmd:"+e+"  "+JSON.stringify(o)),a++,console.log(a),t[a]=n,s(e,o,a)};return e.initSocket=function(){var e=localStorage.getItem("walletAddress"),a=localStorage.getItem("token"+e);(n=new WebSocket(defines.serverUrl+"&token="+a)).onmessage=function(e){var a=JSON.parse(e.data)[1];if(console.log("event",i),console.log("on notify cmd:",a,t.hasOwnProperty(a.callBackIndex)),t.hasOwnProperty(a.callBackIndex)){var o=t[a.callBackIndex];console.log(o),o&&o(a.result,a.data)}else{var n=a.type;i.fire(n,a.data)}}},e.request_wxLogin=function(e,t){r("wxlogin",e,t)},e.request_creatroom=function(e,t){r("createroom_req",e,t)},e.request_jion=function(e,t){r("joinroom_req",e,t)},e.request_enter_room=function(e,t){r("enterroom_req",e,t)},e.request_buchu_card=function(e,t){r("chu_bu_card_req",e,t)},e.request_chu_card=function(e,t){r("chu_card_req",e,t)},e.onPlayerJoinRoom=function(e){i.on("player_joinroom_notify",e)},e.onPlayerReady=function(e){i.on("player_ready_notify",e)},e.onGameStart=function(e){e&&i.on("gameStart_notify",e)},e.onChangeHouseManage=function(e){e&&i.on("changehousemanage_notify",e)},e.requestReady=function(){s("player_ready_notify",{},null)},e.requestStart=function(e){r("player_start_notify",{},e)},e.requestRobState=function(e){s("player_rob_notify",e,null)},e.onPushCards=function(e){e&&i.on("pushcard_notify",e)},e.onCanRobState=function(e){e&&i.on("canrob_notify",e)},e.enterRoomResp=function(e){e&&i.on("enterroom_resp",e)},e.onRobState=function(e){e&&i.on("canrob_state_notify",e)},e.onChangeMaster=function(e){e&&i.on("change_master_notify",e)},e.onShowBottomCard=function(e){e&&i.on("change_showcard_notify",e)},e.onCanChuCard=function(e){e&&i.on("can_chu_card_notify",e)},e.onRoomChangeState=function(e){e&&i.on("room_state_notify",e)},e.onGameOver=function(e){e&&i.on("game_over",e)},e.onOtherPlayerChuCard=function(e){e&&i.on("other_chucard_notify",e)},e.onConnect=function(e){e&&i.on("connect_user_info",e)},e},t.exports=a.default,cc._RF.pop()},{"../util/event_lister.js":"event_lister"}],waitnode:[function(e,t,a){"use strict";cc._RF.push(t,"17318Pv1MxELb6d+o/SHo0s","waitnode"),cc.Class({extends:cc.Component,properties:{loadimage_target:cc.Node,lblContent:cc.Label},start:function(){},update:function(e){this.loadimage_target.rotation=this.loadimage_target.rotation-45*e},show:function(e){this._isShow=!0,this.node&&(this.node.active=this._isShow),this.lblContent&&(null==e&&(e=""),this.lblContent.string=e)},hide:function(){this._isShow=!1,this.node&&(this.node.active=this._isShow)}}),cc._RF.pop()},{}]},{},["player","socket_ctr","gameScene","gamebeforeUI","gameingUI","card","player_node","hallScene","creatRoom","joinRoom","loginScene","mygolbal","event_lister","http","waitnode"]);